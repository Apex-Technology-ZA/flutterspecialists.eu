---
import BaseLayout from "@layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const courses = (await getCollection("courses")).filter((c) => !c.data.draft);
---
<BaseLayout title="Self-Study Courses — Flutter Specialists" description="On-demand Flutter courses for engineers and teams.">
  <section class="container py-16">
    <h1 class="text-3xl font-bold">Self-Study Courses</h1>
    <p class="mt-3 text-gray-700 max-w-3xl">
      Practical, focused courses you can take at your own pace. Learn patterns, testing, performance, and architecture with real-world guidance.
    </p>

    <div class="mt-8 grid gap-6 md:grid-cols-3">
      {courses.map((c) => (
        <article class="rounded border p-6 flex flex-col">
          {c.data.heroImage && <img src={c.data.heroImage} alt="" class="mb-3 rounded" loading="lazy" />}
          <h2 class="font-semibold text-lg">
            <a href={`/courses/${c.slug}/`} class="hover:underline">{c.data.title}</a>
          </h2>
          <p class="mt-2 text-sm text-gray-600 line-clamp-4">{c.data.description}</p>

          <div class="mt-3 flex flex-wrap items-center gap-3 text-xs text-gray-500">
            {typeof c.data.price === "number" && <span>Price: ${c.data.price.toFixed(2)}</span>}
            {c.data.duration && <span>• {c.data.duration}</span>}
            {c.data.level && <span>• {c.data.level}</span>}
          </div>

          <div class="mt-4">
            <a href={`/courses/${c.slug}/`} class="inline-block rounded border border-primary px-4 py-2 text-primary hover:bg-blue-50">
              View details
            </a>
            {c.data.paymentLink && (
              <a
                href={c.data.paymentLink}
                class="ml-2 inline-block rounded bg-primary px-4 py-2 text-white hover:bg-secondary"
                rel="noopener"
              >
                Buy now
              </a>
            )}
          </div>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>