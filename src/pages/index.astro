---
import BaseLayout from "@layouts/BaseLayout.astro";
import NewsletterForm from "@components/NewsletterForm.astro";
import { getCollection } from "astro:content";

const latest = (await getCollection("articles"))
  .filter((p) => !p.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 3);
---
<BaseLayout title="Zayin Krige - Flutter Specialist & Consultant" description="Expert Flutter consulting, training and insights for enterprise mobile development.">
  <section class="container py-16">
    <div class="grid gap-10 md:grid-cols-2 items-center">
      <div>
        <div class="mb-4">
          <span class="inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">Flutter Specialist</span>
        </div>
        <h1 class="text-4xl md:text-5xl font-bold leading-tight">
          Building Exceptional Flutter Applications
        </h1>
        <p class="mt-4 text-lg text-gray-700">
          From enterprise architecture to performance optimization, I help development teams create robust,
          scalable Flutter applications that stand the test of time.
        </p>
        <p class="mt-3 text-gray-600">
          Through <a href="/articles" class="text-blue-600 hover:underline font-medium">technical articles</a>,
          <a href="/services" class="text-blue-600 hover:underline font-medium">consulting services</a>, and
          <a href="/newsletter" class="text-blue-600 hover:underline font-medium">insights</a> from real-world projects,
          I share practical knowledge for Flutter developers and teams.
        </p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="/services" class="inline-flex items-center rounded bg-primary px-5 py-3 text-white hover:bg-secondary">
            Consulting Services
          </a>
          <a href="/articles/" class="inline-flex items-center rounded border border-primary px-5 py-3 text-primary hover:bg-blue-50">
            Technical Articles
          </a>
          <a href="/newsletter" class="inline-flex items-center rounded border border-primary px-5 py-3 text-primary hover:bg-blue-50">
            Newsletter
          </a>
        </div>
      </div>
      <div class="rounded-lg border-2 border-blue-200 p-6 bg-gradient-to-br from-blue-50 to-indigo-50">
        <div class="text-center mb-4">
          <h2 class="text-xl font-bold text-gray-900 mb-2">Flutter Insights Newsletter</h2>
          <p class="text-sm text-gray-600">Get the latest articles, tips, and insights on enterprise Flutter development</p>
        </div>
        <NewsletterForm />
        <p class="text-xs text-gray-500 mt-3 text-center">
          Join 500+ Flutter developers • No spam • Unsubscribe anytime
        </p>
      </div>
    </div>
  </section>

  <section class="container pb-16">
    <h2 class="text-2xl font-semibold mb-6">Latest articles</h2>
    <div class="grid gap-6 md:grid-cols-3">
      {latest.map((p) => (
        <article class="rounded border p-4">
          {p.data.heroImage && <img src={p.data.heroImage} alt="" class="mb-3 rounded" loading="lazy" />}
          <h3 class="font-semibold text-lg">
            <a href={`/articles/${p.slug}/`} class="hover:underline">{p.data.title}</a>
          </h3>
          <p class="mt-2 text-sm text-gray-600 line-clamp-3">{p.data.description}</p>
          <div class="mt-3 text-xs text-gray-500">{new Date(p.data.date).toLocaleDateString()}</div>
          <a href={`/articles/${p.slug}/`} class="mt-3 inline-block text-sm text-primary hover:underline">Read more →</a>
        </article>
      ))}
    </div>
    <div class="mt-8">
      <a href="/articles/" class="text-primary hover:underline">Browse all articles →</a>
    </div>
  </section>
</BaseLayout>